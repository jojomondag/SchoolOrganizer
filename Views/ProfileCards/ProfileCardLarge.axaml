<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:SchoolOrganizer.Views.ProfileCards"
             xmlns:views="using:SchoolOrganizer.Views.Converters"
             xmlns:models="using:SchoolOrganizer.Models"
             xmlns:material="using:Material.Icons.Avalonia"
             x:Class="SchoolOrganizer.Views.ProfileCards.ProfileCardLarge"
             x:DataType="models:Student">

  <UserControl.Resources>
    <views:UniversalImageConverter x:Key="UniversalImageConverter"/>
  </UserControl.Resources>

  <Border x:Name="CardBorder"
          Background="{DynamicResource BackgroundPrimaryBrush}"
          CornerRadius="16"
          BoxShadow="{DynamicResource ShadowLight}"
          Margin="40,20"
          BorderBrush="{DynamicResource BlackBrush}"
          BorderThickness="1">

    <Grid Margin="40">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto" MinWidth="280"/>
        <ColumnDefinition Width="*"/>
      </Grid.ColumnDefinitions>

      <!-- Profile Image -->
      <StackPanel Grid.Column="0" VerticalAlignment="Top" Margin="0,10,40,0">
        <Border x:Name="ProfileImageBorder"
                Background="{DynamicResource TransparentColor}"
                CornerRadius="120"
                BorderThickness="3"
                BorderBrush="{DynamicResource BlackBrush}"
                Padding="0"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Width="240"
                Height="240"
                Margin="0,0,0,20"
                Cursor="Hand">

          <Grid>
            <!-- Background circle -->
            <Ellipse Fill="{DynamicResource BackgroundTertiaryBrush}"
                     HorizontalAlignment="Stretch"
                     VerticalAlignment="Stretch"/>

            <!-- Profile image -->
            <Ellipse x:Name="ProfileImageEllipse"
                     HorizontalAlignment="Stretch"
                     VerticalAlignment="Stretch"
                     Cursor="Hand">
              <Ellipse.Fill>
                <ImageBrush Stretch="UniformToFill"/>
              </Ellipse.Fill>
            </Ellipse>
          </Grid>
        </Border>
      </StackPanel>

      <!-- Details -->
      <StackPanel Grid.Column="1" VerticalAlignment="Top" Margin="0,10,0,0">
        <TextBlock x:Name="NameText"
                   FontSize="36"
                   Foreground="{DynamicResource TextPrimaryBrush}"
                   Margin="0,0,0,15" TextWrapping="Wrap"/>

        <StackPanel Margin="0,0,0,25">
          <TextBlock Text="Class" FontSize="14" FontWeight="SemiBold"
                     Foreground="{DynamicResource TextPrimaryBrush}" Margin="0,0,0,5"/>
          <TextBlock x:Name="RoleText" FontSize="18" Foreground="{DynamicResource TextPrimaryBrush}"/>
        </StackPanel>

        <StackPanel Spacing="20">
          <StackPanel>
            <TextBlock Text="Email Address" FontSize="14" FontWeight="SemiBold"
                       Foreground="{DynamicResource TextPrimaryBrush}" Margin="0,0,0,5"/>
            <StackPanel Orientation="Horizontal" Spacing="8" Cursor="Hand" 
                        PointerPressed="OnEmailClicked" 
                        PointerEntered="OnEmailPointerEntered" 
                        PointerExited="OnEmailPointerExited">
              <material:MaterialIcon x:Name="EmailIcon" 
                                     Kind="Email" 
                                     Width="20" 
                                     Height="20" 
                                     Foreground="{DynamicResource TextPrimaryBrush}"
                                     IsHitTestVisible="False"/>
              <TextBlock x:Name="EmailText" 
                         FontSize="18" 
                         Foreground="{DynamicResource TextPrimaryBrush}"
                         VerticalAlignment="Center"/>
            </StackPanel>
          </StackPanel>

          <StackPanel>
            <TextBlock Text="Teacher" FontSize="14" FontWeight="SemiBold"
                       Foreground="{DynamicResource TextPrimaryBrush}" Margin="0,0,0,5"/>
            <TextBlock x:Name="SecondaryText" FontSize="18" Foreground="{DynamicResource TextPrimaryBrush}"/>
          </StackPanel>

          <StackPanel x:Name="EnrollmentSection">
            <TextBlock Text="Enrollment Date" FontSize="14" FontWeight="SemiBold"
                       Foreground="{DynamicResource TextPrimaryBrush}" Margin="0,0,0,5"/>
            <TextBlock x:Name="EnrollmentText" FontSize="18" Foreground="{DynamicResource TextPrimaryBrush}"/>
          </StackPanel>

          <StackPanel>
            <TextBlock Text="Student ID" FontSize="14" FontWeight="SemiBold"
                       Foreground="{DynamicResource TextPrimaryBrush}" Margin="0,0,0,5"/>
            <TextBlock x:Name="IdText" FontSize="18" Foreground="{DynamicResource TextPrimaryBrush}" FontFamily="Consolas"/>
          </StackPanel>

          <!-- View Assignments Button -->
          <StackPanel Margin="0,20,0,0">
            <Button x:Name="ViewAssignmentsButton"
                    Content="View Assignments"
                    FontSize="16"
                    FontWeight="SemiBold"
                    Padding="20,12"
                    Background="{DynamicResource BackgroundSecondaryBrush}"
                    Foreground="{DynamicResource TextPrimaryBrush}"
                    BorderBrush="{DynamicResource BlackBrush}"
                    BorderThickness="1"
                    CornerRadius="8"
                    Cursor="Hand"
                    Click="OnViewAssignmentsButtonClicked">
              <Button.Styles>
                <Style Selector="Button:pointerover">
                  <Setter Property="Background" Value="{DynamicResource BackgroundTertiaryBrush}"/>
                  <Setter Property="BorderBrush" Value="{DynamicResource TextPrimaryBrush}"/>
                </Style>
              </Button.Styles>
            </Button>
          </StackPanel>
        </StackPanel>
      </StackPanel>
    </Grid>
  </Border>
</UserControl>
