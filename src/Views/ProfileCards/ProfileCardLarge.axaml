<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:SchoolOrganizer.Src.Views.ProfileCards"
             xmlns:views="using:SchoolOrganizer.Src.Converters"
             xmlns:models="using:SchoolOrganizer.Src.Models.Students"
             xmlns:material="using:Material.Icons.Avalonia"
             xmlns:components="using:SchoolOrganizer.Src.Views.ProfileCards.Components"
             x:Class="SchoolOrganizer.Src.Views.ProfileCards.ProfileCardLarge"
             x:DataType="models:Student">

  <UserControl.Resources>
    <views:UniversalImageConverter x:Key="UniversalImageConverter"/>
  </UserControl.Resources>

  <Border x:Name="CardBorder"
          Background="{DynamicResource BackgroundPrimaryBrush}"
          CornerRadius="16"
          BoxShadow="{DynamicResource ShadowLight}"
          Margin="40,20"
          BorderBrush="{DynamicResource BlackBrush}"
          BorderThickness="1"
          IsHitTestVisible="True">

    <Grid Margin="40">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto" MinWidth="280"/>
        <ColumnDefinition Width="*"/>
      </Grid.ColumnDefinitions>

      <!-- Profile Image -->
      <StackPanel Grid.Column="0" VerticalAlignment="Top" Margin="0,10,40,0">
        <components:ProfileImage x:Name="ProfileImageBorder"
                                       Width="240"
                                       Height="240"
                                       BorderThickness="3"
                                       ImagePath="{Binding PictureUrl}"
                                       Margin="0,0,0,20"
                                       ImageClicked="OnProfileImageClicked"/>
      </StackPanel>

      <!-- Details -->
      <StackPanel Grid.Column="1" VerticalAlignment="Top" Margin="0,10,0,0">
        <TextBlock x:Name="NameText"
                   FontSize="36"
                   Foreground="{DynamicResource TextPrimaryBrush}"
                   Margin="0,0,0,15" TextWrapping="Wrap"/>

        <StackPanel Margin="0,0,0,25">
          <TextBlock Text="Class" FontSize="14" FontWeight="SemiBold"
                     Foreground="{DynamicResource TextPrimaryBrush}" Margin="0,0,0,5"/>
          <TextBlock x:Name="RoleText" FontSize="18" Foreground="{DynamicResource TextPrimaryBrush}"/>
        </StackPanel>

        <StackPanel Spacing="20">
          <StackPanel>
            <TextBlock Text="Email Address" FontSize="14" FontWeight="SemiBold"
                       Foreground="{DynamicResource TextPrimaryBrush}" Margin="0,0,0,5"/>
            <StackPanel Orientation="Horizontal" Spacing="8" Cursor="Hand" 
                        PointerPressed="OnEmailClicked" 
                        PointerEntered="OnEmailPointerEntered" 
                        PointerExited="OnEmailPointerExited">
              <material:MaterialIcon x:Name="EmailIcon" 
                                     Kind="Email" 
                                     Width="20" 
                                     Height="20" 
                                     Foreground="{DynamicResource TextPrimaryBrush}"
                                     IsHitTestVisible="False"/>
              <TextBlock x:Name="EmailText" 
                         FontSize="18" 
                         Foreground="{DynamicResource TextPrimaryBrush}"
                         VerticalAlignment="Center"/>
            </StackPanel>
          </StackPanel>

          <StackPanel>
            <TextBlock Text="Teacher" FontSize="14" FontWeight="SemiBold"
                       Foreground="{DynamicResource TextPrimaryBrush}" Margin="0,0,0,5"/>
            <TextBlock x:Name="SecondaryText" FontSize="18" Foreground="{DynamicResource TextPrimaryBrush}"/>
          </StackPanel>

          <StackPanel x:Name="EnrollmentSection">
            <TextBlock Text="Enrollment Date" FontSize="14" FontWeight="SemiBold"
                       Foreground="{DynamicResource TextPrimaryBrush}" Margin="0,0,0,5"/>
            <TextBlock x:Name="EnrollmentText" FontSize="18" Foreground="{DynamicResource TextPrimaryBrush}"/>
          </StackPanel>

          <StackPanel>
            <TextBlock Text="Student ID" FontSize="14" FontWeight="SemiBold"
                       Foreground="{DynamicResource TextPrimaryBrush}" Margin="0,0,0,5"/>
            <TextBlock x:Name="IdText" FontSize="18" Foreground="{DynamicResource TextPrimaryBrush}" FontFamily="Consolas"/>
          </StackPanel>

          <!-- View Assignments Button -->
          <StackPanel Margin="0,20,0,0">
            <Button x:Name="ViewAssignmentsButton"
                    Content="View Assignments"
                    FontSize="16"
                    FontWeight="SemiBold"
                    Padding="12,6"
                    Background="{DynamicResource AccentButtonBackground}"
                    Foreground="White"
                    BorderThickness="0"
                    CornerRadius="4"
                    Cursor="Hand"
                    Click="OnViewAssignmentsButtonClicked">
              <Button.Styles>
                <Style Selector="Button:pointerover">
                  <Setter Property="Background" Value="{DynamicResource AccentButtonBackgroundHover}"/>
                </Style>
              </Button.Styles>
            </Button>
          </StackPanel>
        </StackPanel>
      </StackPanel>
    </Grid>
  </Border>
</UserControl>
